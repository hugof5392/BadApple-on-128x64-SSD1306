#include <SPI.h>
#include <Wire.h>
#include <Adafruit_GFX.h>
#include <Adafruit_SSD1306.h>

#include "fotogramas.h"

#define SCREEN_WIDTH 128
#define SCREEN_HEIGHT 64

#define OLED_RESET -1
#define SCREEN_ADDRESS 0x3C
Adafruit_SSD1306 display(SCREEN_WIDTH, SCREEN_HEIGHT, &Wire, OLED_RESET);

int frames_speed = 20; // Change this value to adjust the frame per second of the video

const uint8_t* const video[] PROGMEM = {
    fotograma0,
    fotograma1,
    fotograma2,
    fotograma3,
    fotograma4,
    fotograma5,
    fotograma6,
    fotograma7,
    fotograma8,
    fotograma9,
    fotograma10,
    fotograma11,
    fotograma12,
    fotograma13,
    fotograma14,
    fotograma15,
    fotograma16,
    fotograma17,
    fotograma18,
    fotograma19,
    fotograma20,
    fotograma21,
    fotograma22,
    fotograma23,
    fotograma24,
    fotograma25,
    fotograma26,
    fotograma27,
    fotograma28,
    fotograma29,
    fotograma30,
    fotograma31,
    fotograma32,
    fotograma33,
    fotograma34,
    fotograma35,
    fotograma36,
    fotograma37,
    fotograma38,
    fotograma39,
    fotograma40,
    fotograma41,
    fotograma42,
    fotograma43,
    fotograma44,
    fotograma45,
    fotograma46,
    fotograma47,
    fotograma48,
    fotograma49,
    fotograma50,
    fotograma51,
    fotograma52,
    fotograma53,
    fotograma54,
    fotograma55,
    fotograma56,
    fotograma57,
    fotograma58,
    fotograma59,
    fotograma60,
    fotograma61,
    fotograma62,
    fotograma63,
    fotograma64,
    fotograma65,
    fotograma66,
    fotograma67,
    fotograma68,
    fotograma69,
    fotograma70,
    fotograma71,
    fotograma72,
    fotograma73,
    fotograma74,
    fotograma75,
    fotograma76,
    fotograma77,
    fotograma78,
    fotograma79,
    fotograma80,
    fotograma81,
    fotograma82,
    fotograma83,
    fotograma84,
    fotograma85,
    fotograma86,
    fotograma87,
    fotograma88,
    fotograma89,
    fotograma90,
    fotograma91,
    fotograma92,
    fotograma93,
    fotograma94,
    fotograma95,
    fotograma96,
    fotograma97,
    fotograma98,
    fotograma99,
    fotograma100,
    fotograma101,
    fotograma102,
    fotograma103,
    fotograma104,
    fotograma105,
    fotograma106,
    fotograma107,
    fotograma108,
    fotograma109,
    fotograma110,
    fotograma111,
    fotograma112,
    fotograma113,
    fotograma114,
    fotograma115,
    fotograma116,
    fotograma117,
    fotograma118,
    fotograma119,
    fotograma120,
    fotograma121,
    fotograma122,
    fotograma123,
    fotograma124,
    fotograma125,
    fotograma126,
    fotograma127,
    fotograma128,
    fotograma129,
    fotograma130,
    fotograma131,
    fotograma132,
    fotograma133,
    fotograma134,
    fotograma135,
    fotograma136,
    fotograma137,
    fotograma138,
    fotograma139,
    fotograma140,
    fotograma141,
    fotograma142,
    fotograma143,
    fotograma144,
    fotograma145,
    fotograma146,
    fotograma147,
    fotograma148,
    fotograma149,
    fotograma150,
    fotograma151,
    fotograma152,
    fotograma153,
    fotograma154,
    fotograma155,
    fotograma156,
    fotograma157,
    fotograma158,
    fotograma159,
    fotograma160,
    fotograma161,
    fotograma162,
    fotograma163,
    fotograma164,
    fotograma165,
    fotograma166,
    fotograma167,
    fotograma168,
    fotograma169,
    fotograma170,
    fotograma171,
    fotograma172,
    fotograma173,
    fotograma174,
    fotograma175,
    fotograma176,
    fotograma177,
    fotograma178,
    fotograma179,
    fotograma180,
    fotograma181,
    fotograma182,
    fotograma183,
    fotograma184,
    fotograma185,
    fotograma186,
    fotograma187,
    fotograma188,
    fotograma189,
    fotograma190,
    fotograma191,
    fotograma192,
    fotograma193,
    fotograma194,
    fotograma195,
    fotograma196,
    fotograma197,
    fotograma198,
    fotograma199,
    fotograma200,
    fotograma201,
    fotograma202,
    fotograma203,
    fotograma204,
    fotograma205,
    fotograma206,
    fotograma207,
    fotograma208,
    fotograma209,
    fotograma210,
    fotograma211,
    fotograma212,
    fotograma213,
    fotograma214,
    fotograma215,
    fotograma216,
    fotograma217,
    fotograma218,
    fotograma219,
    fotograma220,
    fotograma221,
    fotograma222,
    fotograma223,
    fotograma224,
    fotograma225,
    fotograma226,
    fotograma227,
    fotograma228,
    fotograma229,
    fotograma230,
    fotograma231,
    fotograma232,
    fotograma233,
    fotograma234,
    fotograma235,
    fotograma236,
    fotograma237,
    fotograma238,
    fotograma239,
    fotograma240,
    fotograma241,
    fotograma242,
    fotograma243,
    fotograma244,
    fotograma245,
    fotograma246,
    fotograma247,
    fotograma248,
    fotograma249,
    fotograma250,
    fotograma251,
    fotograma252,
    fotograma253,
    fotograma254,
    fotograma255,
    fotograma256,
    fotograma257,
    fotograma258,
    fotograma259,
    fotograma260,
    fotograma261,
    fotograma262,
    fotograma263,
    fotograma264,
    fotograma265,
    fotograma266,
    fotograma267,
    fotograma268,
    fotograma269,
    fotograma270,
    fotograma271,
    fotograma272,
    fotograma273,
    fotograma274,
    fotograma275,
    fotograma276,
    fotograma277,
    fotograma278,
    fotograma279,
    fotograma280,
    fotograma281,
    fotograma282,
    fotograma283,
    fotograma284,
    fotograma285,
    fotograma286,
    fotograma287,
    fotograma288,
    fotograma289,
    fotograma290,
    fotograma291,
    fotograma292,
    fotograma293,
    fotograma294,
    fotograma295,
    fotograma296,
    fotograma297,
    fotograma298,
    fotograma299,
    fotograma300,
    fotograma301,
    fotograma302,
    fotograma303,
    fotograma304,
    fotograma305,
    fotograma306,
    fotograma307,
    fotograma308,
    fotograma309,
    fotograma310,
    fotograma311,
    fotograma312,
    fotograma313,
    fotograma314,
    fotograma315,
    fotograma316,
    fotograma317,
    fotograma318,
    fotograma319,
    fotograma320,
    fotograma321,
    fotograma322,
    fotograma323,
    fotograma324,
    fotograma325,
    fotograma326,
    fotograma327,
    fotograma328,
    fotograma329,
    fotograma330,
    fotograma331,
    fotograma332,
    fotograma333,
    fotograma334,
    fotograma335,
    fotograma336,
    fotograma337,
    fotograma338,
    fotograma339,
    fotograma340,
    fotograma341,
    fotograma342,
    fotograma343,
    fotograma344,
    fotograma345,
    fotograma346,
    fotograma347,
    fotograma348,
    fotograma349,
    fotograma350,
    fotograma351,
    fotograma352,
    fotograma353,
    fotograma354,
    fotograma355,
    fotograma356,
    fotograma357,
    fotograma358,
    fotograma359,
    fotograma360,
    fotograma361,
    fotograma362,
    fotograma363,
    fotograma364,
    fotograma365,
    fotograma366,
    fotograma367,
    fotograma368,
    fotograma369,
    fotograma370,
    fotograma371,
    fotograma372,
    fotograma373,
    fotograma374,
    fotograma375,
    fotograma376,
    fotograma377,
    fotograma378,
    fotograma379,
    fotograma380,
    fotograma381,
    fotograma382,
    fotograma383,
    fotograma384,
    fotograma385,
    fotograma386,
    fotograma387,
    fotograma388,
    fotograma389,
    fotograma390,
    fotograma391,
    fotograma392,
    fotograma393,
    fotograma394,
    fotograma395,
    fotograma396,
    fotograma397,
    fotograma398,
    fotograma399,
    fotograma400,
    fotograma401,
    fotograma402,
    fotograma403,
    fotograma404,
    fotograma405,
    fotograma406,
    fotograma407,
    fotograma408,
    fotograma409,
    fotograma410,
    fotograma411,
    fotograma412,
    fotograma413,
    fotograma414,
    fotograma415,
    fotograma416,
    fotograma417,
    fotograma418,
    fotograma419,
    fotograma420,
    fotograma421,
    fotograma422,
    fotograma423,
    fotograma424,
    fotograma425,
    fotograma426,
    fotograma427,
    fotograma428,
    fotograma429,
    fotograma430,
    fotograma431,
    fotograma432,
    fotograma433,
    fotograma434,
    fotograma435,
    fotograma436,
    fotograma437,
    fotograma438,
    fotograma439,
    fotograma440,
    fotograma441,
    fotograma442,
    fotograma443,
    fotograma444,
    fotograma445,
    fotograma446,
    fotograma447,
    fotograma448,
    fotograma449,
    fotograma450,
    fotograma451,
    fotograma452,
    fotograma453,
    fotograma454,
    fotograma455,
    fotograma456,
    fotograma457,
    fotograma458,
    fotograma459,
    fotograma460,
    fotograma461,
    fotograma462,
    fotograma463,
    fotograma464,
    fotograma465,
    fotograma466,
    fotograma467,
    fotograma468,
    fotograma469,
    fotograma470,
    fotograma471,
    fotograma472,
    fotograma473,
    fotograma474,
    fotograma475,
    fotograma476,
    fotograma477,
    fotograma478,
    fotograma479,
    fotograma480,
    fotograma481,
    fotograma482,
    fotograma483,
    fotograma484,
    fotograma485,
    fotograma486,
    fotograma487,
    fotograma488,
    fotograma489,
    fotograma490,
    fotograma491,
    fotograma492,
    fotograma493,
    fotograma494,
    fotograma495,
    fotograma496,
    fotograma497,
    fotograma498,
    fotograma499,
    fotograma500,
    fotograma501,
    fotograma502,
    fotograma503,
    fotograma504,
    fotograma505,
    fotograma506,
    fotograma507,
    fotograma508,
    fotograma509,
    fotograma510,
    fotograma511,
    fotograma512,
    fotograma513,
    fotograma514,
    fotograma515,
    fotograma516,
    fotograma517,
    fotograma518,
    fotograma519,
    fotograma520,
    fotograma521,
    fotograma522,
    fotograma523,
    fotograma524,
    fotograma525,
    fotograma526,
    fotograma527,
    fotograma528,
    fotograma529,
    fotograma530,
    fotograma531,
    fotograma532,
    fotograma533,
    fotograma534,
    fotograma535,
    fotograma536,
    fotograma537,
    fotograma538,
    fotograma539,
    fotograma540,
    fotograma541,
    fotograma542,
    fotograma543,
    fotograma544,
    fotograma545,
    fotograma546,
    fotograma547,
    fotograma548,
    fotograma549,
    fotograma550,
    fotograma551,
    fotograma552,
    fotograma553,
    fotograma554,
    fotograma555,
    fotograma556,
    fotograma557,
    fotograma558,
    fotograma559,
    fotograma560,
    fotograma561,
    fotograma562,
    fotograma563,
    fotograma564,
    fotograma565,
    fotograma566,
    fotograma567,
    fotograma568,
    fotograma569,
    fotograma570,
    fotograma571,
    fotograma572,
    fotograma573,
    fotograma574,
    fotograma575,
    fotograma576,
    fotograma577,
    fotograma578,
    fotograma579,
    fotograma580,
    fotograma581,
    fotograma582,
    fotograma583,
    fotograma584,
    fotograma585,
    fotograma586,
    fotograma587,
    fotograma588,
    fotograma589,
    fotograma590,
    fotograma591,
    fotograma592,
    fotograma593,
    fotograma594,
    fotograma595,
    fotograma596,
    fotograma597,
    fotograma598,
    fotograma599,
    fotograma600,
    fotograma601,
    fotograma602,
    fotograma603,
    fotograma604,
    fotograma605,
    fotograma606,
    fotograma607,
    fotograma608,
    fotograma609,
    fotograma610,
    fotograma611,
    fotograma612,
    fotograma613,
    fotograma614,
    fotograma615,
    fotograma616,
    fotograma617,
    fotograma618,
    fotograma619,
    fotograma620,
    fotograma621,
    fotograma622,
    fotograma623,
    fotograma624,
    fotograma625,
    fotograma626,
    fotograma627,
    fotograma628,
    fotograma629,
    fotograma630,
    fotograma631,
    fotograma632,
    fotograma633,
    fotograma634,
    fotograma635,
    fotograma636,
    fotograma637,
    fotograma638,
    fotograma639,
    fotograma640,
    fotograma641,
    fotograma642,
    fotograma643,
    fotograma644,
    fotograma645,
    fotograma646,
    fotograma647,
    fotograma648,
    fotograma649,
    fotograma650,
    fotograma651,
    fotograma652,
    fotograma653,
    fotograma654,
    fotograma655,
    fotograma656,
    fotograma657,
    fotograma658,
    fotograma659,
    fotograma660,
    fotograma661,
    fotograma662,
    fotograma663,
    fotograma664,
    fotograma665,
    fotograma666,
    fotograma667,
    fotograma668,
    fotograma669,
    fotograma670,
    fotograma671,
    fotograma672,
    fotograma673,
    fotograma674,
    fotograma675,
    fotograma676,
    fotograma677,
    fotograma678,
    fotograma679,
    fotograma680,
    fotograma681,
    fotograma682,
    fotograma683,
    fotograma684,
    fotograma685,
    fotograma686,
    fotograma687,
    fotograma688,
    fotograma689,
    fotograma690,
    fotograma691,
    fotograma692,
    fotograma693,
    fotograma694,
    fotograma695,
    fotograma696,
    fotograma697,
    fotograma698,
    fotograma699,
    fotograma700,
    fotograma701,
    fotograma702,
    fotograma703,
    fotograma704,
    fotograma705,
    fotograma706,
    fotograma707,
    fotograma708,
    fotograma709,
    fotograma710,
    fotograma711,
    fotograma712,
    fotograma713,
    fotograma714,
    fotograma715,
    fotograma716,
    fotograma717,
    fotograma718,
    fotograma719,
    fotograma720,
    fotograma721,
    fotograma722,
    fotograma723,
    fotograma724,
    fotograma725,
    fotograma726,
    fotograma727,
    fotograma728,
    fotograma729,
    fotograma730,
    fotograma731,
    fotograma732,
    fotograma733,
    fotograma734,
    fotograma735,
    fotograma736,
    fotograma737,
    fotograma738,
    fotograma739,
    fotograma740,
    fotograma741,
    fotograma742,
    fotograma743,
    fotograma744,
    fotograma745,
    fotograma746,
    fotograma747,
    fotograma748,
    fotograma749,
    fotograma750,
    fotograma751,
    fotograma752,
    fotograma753,
    fotograma754,
    fotograma755,
    fotograma756,
    fotograma757,
    fotograma758,
    fotograma759,
    fotograma760,
    fotograma761,
    fotograma762,
    fotograma763,
    fotograma764,
    fotograma765,
    fotograma766,
    fotograma767,
    fotograma768,
    fotograma769,
    fotograma770,
    fotograma771,
    fotograma772,
    fotograma773,
    fotograma774,
    fotograma775,
    fotograma776,
    fotograma777,
    fotograma778,
    fotograma779,
    fotograma780,
    fotograma781,
    fotograma782,
    fotograma783,
    fotograma784,
    fotograma785,
    fotograma786,
    fotograma787,
    fotograma788,
    fotograma789,
    fotograma790,
    fotograma791,
    fotograma792,
    fotograma793,
    fotograma794,
    fotograma795,
    fotograma796,
    fotograma797,
    fotograma798,
    fotograma799,
    fotograma800,
    fotograma801,
    fotograma802,
    fotograma803,
    fotograma804,
    fotograma805,
    fotograma806,
    fotograma807,
    fotograma808,
    fotograma809,
    fotograma810,
    fotograma811,
    fotograma812,
    fotograma813,
    fotograma814,
    fotograma815,
    fotograma816,
    fotograma817,
    fotograma818,
    fotograma819,
    fotograma820,
    fotograma821,
    fotograma822,
    fotograma823,
    fotograma824,
    fotograma825,
    fotograma826,
    fotograma827,
    fotograma828,
    fotograma829,
    fotograma830,
    fotograma831,
    fotograma832,
    fotograma833,
    fotograma834,
    fotograma835,
    fotograma836,
    fotograma837,
    fotograma838,
    fotograma839,
    fotograma840,
    fotograma841,
    fotograma842,
    fotograma843,
    fotograma844,
    fotograma845,
    fotograma846,
    fotograma847,
    fotograma848,
    fotograma849,
    fotograma850,
    fotograma851,
    fotograma852,
    fotograma853,
    fotograma854,
    fotograma855,
    fotograma856,
    fotograma857,
    fotograma858,
    fotograma859,
    fotograma860,
    fotograma861,
    fotograma862,
    fotograma863,
    fotograma864,
    fotograma865,
    fotograma866,
    fotograma867,
    fotograma868,
    fotograma869,
    fotograma870,
    fotograma871,
    fotograma872,
    fotograma873,
    fotograma874,
    fotograma875,
    fotograma876,
    fotograma877,
    fotograma878,
    fotograma879,
    fotograma880,
    fotograma881,
    fotograma882,
    fotograma883,
    fotograma884,
    fotograma885,
    fotograma886,
    fotograma887,
    fotograma888,
    fotograma889,
    fotograma890,
    fotograma891,
    fotograma892,
    fotograma893,
    fotograma894,
    fotograma895,
    fotograma896,
    fotograma897,
    fotograma898,
    fotograma899,
    fotograma900,
    fotograma901,
    fotograma902,
    fotograma903,
    fotograma904,
    fotograma905,
    fotograma906,
    fotograma907,
    fotograma908,
    fotograma909,
    fotograma910,
    fotograma911,
    fotograma912,
    fotograma913,
    fotograma914,
    fotograma915,
    fotograma916,
    fotograma917,
    fotograma918,
    fotograma919,
    fotograma920,
    fotograma921,
    fotograma922,
    fotograma923,
    fotograma924,
    fotograma925,
    fotograma926,
    fotograma927,
    fotograma928,
    fotograma929,
    fotograma930,
    fotograma931,
    fotograma932,
    fotograma933,
    fotograma934,
    fotograma935,
    fotograma936,
    fotograma937,
    fotograma938,
    fotograma939,
    fotograma940,
    fotograma941,
    fotograma942,
    fotograma943,
    fotograma944,
    fotograma945,
    fotograma946,
    fotograma947,
    fotograma948,
    fotograma949,
    fotograma950,
    fotograma951,
    fotograma952,
    fotograma953,
    fotograma954,
    fotograma955,
    fotograma956,
    fotograma957,
    fotograma958,
    fotograma959,
    fotograma960,
    fotograma961,
    fotograma962,
    fotograma963,
    fotograma964,
    fotograma965,
    fotograma966,
    fotograma967,
    fotograma968,
    fotograma969,
    fotograma970,
    fotograma971,
    fotograma972,
    fotograma973,
    fotograma974,
    fotograma975,
    fotograma976,
    fotograma977,
    fotograma978,
    fotograma979,
    fotograma980,
    fotograma981,
    fotograma982,
    fotograma983,
    fotograma984,
    fotograma985,
    fotograma986,
    fotograma987,
    fotograma988,
    fotograma989,
    fotograma990,
    fotograma991,
    fotograma992,
    fotograma993,
    fotograma994,
    fotograma995,
    fotograma996,
    fotograma997,
    fotograma998,
    fotograma999,
    fotograma1000,
    fotograma1001,
    fotograma1002,
    fotograma1003,
    fotograma1004,
    fotograma1005,
    fotograma1006,
    fotograma1007,
    fotograma1008,
    fotograma1009,
    fotograma1010,
    fotograma1011,
    fotograma1012,
    fotograma1013,
    fotograma1014,
    fotograma1015,
    fotograma1016,
    fotograma1017,
    fotograma1018,
    fotograma1019,
    fotograma1020,
    fotograma1021,
    fotograma1022,
    fotograma1023,
    fotograma1024,
    fotograma1025,
    fotograma1026,
    fotograma1027,
    fotograma1028,
    fotograma1029,
    fotograma1030,
    fotograma1031,
    fotograma1032,
    fotograma1033,
    fotograma1034,
    fotograma1035,
    fotograma1036,
    fotograma1037,
    fotograma1038,
    fotograma1039,
    fotograma1040,
    fotograma1041,
    fotograma1042,
    fotograma1043,
    fotograma1044,
    fotograma1045,
    fotograma1046,
    fotograma1047,
    fotograma1048,
    fotograma1049,
    fotograma1050,
    fotograma1051,
    fotograma1052,
    fotograma1053,
    fotograma1054,
    fotograma1055,
    fotograma1056,
    fotograma1057,
    fotograma1058,
    fotograma1059,
    fotograma1060,
    fotograma1061,
    fotograma1062,
    fotograma1063,
    fotograma1064,
    fotograma1065,
    fotograma1066,
    fotograma1067,
    fotograma1068,
    fotograma1069,
    fotograma1070,
    fotograma1071,
    fotograma1072,
    fotograma1073,
    fotograma1074,
    fotograma1075,
    fotograma1076,
    fotograma1077,
    fotograma1078,
    fotograma1079,
    fotograma1080,
    fotograma1081,
    fotograma1082,
    fotograma1083,
    fotograma1084,
    fotograma1085,
    fotograma1086,
    fotograma1087,
    fotograma1088,
    fotograma1089,
    fotograma1090,
    fotograma1091,
    fotograma1092,
    fotograma1093,
    fotograma1094,
};


void setup() {
  Serial.begin(9600);
  randomSeed(micros());

  if (!display.begin(SSD1306_SWITCHCAPVCC, SCREEN_ADDRESS)) {
    Serial.println(F("SSD1306 allocation failed"));
    for (;;)
      ;
  }

  display.setTextColor(SSD1306_WHITE);
  display.setTextSize(1);
  display.setCursor(0, 0);
  display.cp437(true);
  display.clearDisplay();

  play();

}

void loop() {
// Nothing to see
}

#define FRAME_SIZE 1024
uint8_t frameBuffer[FRAME_SIZE];

void play() {

  for(int i =0; i<1094; i++) {

    decodeRLE(video[i], frameBuffer);

    display.clearDisplay();
    display.drawBitmap(0,0,frameBuffer,128,64,SSD1306_WHITE);
    display.display();
    delay(frames_speed);
  }
};

void decodeRLE(const uint8_t* data, uint8_t* out){
  int outIndex = 0;
  int i = 0;

  while (outIndex < 1024)
  {
    uint8_t count = data[i++];
    uint8_t value = data[i++];

    for(int j = 0; j < count; j++)
      out[outIndex++] = value;
  }
}
